---
layout: post
title: 'JavaScript 相加空白 (The BaNaNa Joke)'
author: 'racterub'
date: '2019-09-12'
tags: 'coding javascript'
header-img: assets/img/back.jpg
---

覺得標題取的有夠爛 XD，但是想不到該怎麼取ㄌ

某天在練 JavaScript 的時候手殘多打了一個 `+` 然後就發現一些奇妙的特性
```
> console.log( 3 + +'2' + 4 + '5' )
95

> console.log(3 + '2' + 4 + '5') //我原本要打這個
3245
```

## 預期輸出 Expected behavior
原本 code 是 `console.log(3 + '2' + 4 + '5')` 但是打錯字之後發現輸出是 `95`，看了一下我犯了什麼低能錯誤之後發現多打了一個 `+` 形成了 `console.log( 3 + +'2' + 4 + '5' )`

## 深入了解 Dig deeper
由於一切的差別就在 `3 + +'2'` 於是就獨立出來輸出，發現 `3 + + '2'` 輸出為 5。

在 google 迷失了一下之後找到了解答 (對拉，這篇文章只是防止我自己失憶)，原來也是一個經典的 JavaScript 奇妙特性 (特別開了一個 repo 叫 `wtfjs` 就知道有多 WTF 了 XDD)
https://github.com/denysdovhan/wtfjs#banana

### 拆一下他做了什麼 Decompose
1. 首先 `3 + + '2'` 會被解讀成 `3 + (+'2')`
2. 而 `(+'2')` 其中的加號會有類似 `Parsefloat` 的效果，所以會變成 `2(integer)`
Stackoverflow 有人整理相關的表格
![tables](https://i.stack.imgur.com/QNMfI.png)

3. 所以整句會變成 `3 + 2`，最後得出 5

基本上就是 JavaScript 在 Addition 上的實作會有各種奇妙的結果，有興趣的可以直接看 MDN 上面的資料 [link](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Arithmetic_Operators#Addition)
